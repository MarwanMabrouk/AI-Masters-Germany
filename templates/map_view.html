{% extends "layout.html" %}
{% block content %}

<section class="bg-white text-dark pt-1 p-lg-0 pt-lg-5 text-center text-sm-start">
    <div class="container">
        <div style="text-align: center">
            <div>
                <h1><span  class="text-primary">Map</span> of Sources</h1>
                <p class="lead my-4"> 
                    In this page, a map visualisation is used to find the institutes stored in the database 
                    by location.
                </p>
            </div>    
        </div>
    </div>
</section>

<section class="bg-white text-dark pt-1 p-lg-0 pt-lg-5 text-center text-sm-start">
    <div class="container-fluid">
        <div style="text-align: center">
            <div class="row text-center g-4">
                <div class="col-md ">
                    <div class="container m-1 mx-auto" id="ChartMap">
                        <div id='chart' class='chart' style="min-width: 1200px; width: auto;" ></div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
         var graph = {{ fig_json | safe}};
        Plotly.plot("chart", graph, {});
    </script>
     <script>
        window.addEventListener("resize", function() {
          var container1_width = document.getElementById("ChartMap").offsetWidth;
          var container1_height = document.getElementById("ChartMap").offsetHeight;
  
  
          if (container1_width < 300) {
              container1_width = 300;
          }
  
          if (container1_height < 100) {
              container1_height = 100;
          }
  
          Plotly.relayout("chart", {
            width: container1_width,
            height: container1_height
          });  
        });
      </script>
{% endblock content %}